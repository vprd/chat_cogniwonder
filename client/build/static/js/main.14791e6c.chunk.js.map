{"version":3,"sources":["components/assets/img/logo.png","components/assets/img/logoWhite.png","api-endpoint.js","components/api.js","components/GloablContext.jsx","components/Login.jsx","components/ChatContext.jsx","components/toxic.js","components/MessagingWindow.jsx","components/ChatPage.jsx","components/Debugger.jsx","components/App.jsx","serviceWorker.js","index.js"],"names":["module","exports","endpoint","window","location","origin","API_ENDPOINT","cache","setupCache","maxAge","axios_cached_api","axios","create","adapter","getendpoint","cookies","Cookies","post","point","data","a","mdn","get","cwcc","api","getconversations","userid","result","console","log","recent_activity","length","sorted","orderBy","v","getmessages","conversation_id","page","authenticate","id","Number","search","user","startconversation","ids","creator","changeconversationname","conversation_name","GlobalContext","createContext","GlobalContextProvider","children","useState","authentication","setAuthentication","name","setuser","enqueueSnackbar","useSnackbar","email_pwd","localStorage","setItem","mobile","email","first_name","last_name","setTimeout","variant","anchorOrigin","vertical","horizontal","persist","preventDuplicate","action","IconButton","onClick","reload","useEffect","Provider","value","Authenticate","addEventListener","e","ctrlKey","key","set","Login","useContext","username","onchange","target","onsubmit","preventDefault","className","onSubmit","onChange","type","placeholder","required","socket_endpoint","SOCKET_SETUP","ChatContext","ChatContextProvider","conversations","setconversations","openedconversation","setOpenedconversation","sock","setSock","conversations_socket","setConversations_socket","socketState","setSocketState","messagesLoad","setMessagesLoad","closeSnackbar","errorSnack","io","conversation_socket","onconversation_socket_update","on","onconnect","autoHideDuration","Array","isArray","emit","map","conversation","room","removeListener","off","updateConversations","useCallback","participants","parti","markUndread","document","querySelector","classList","add","markRead","remove","error","online","message","onupadte","update","o","display_name","socket","notification","event","removeAllListeners","disconnect","ChangeName","changegroupname","setchangegroupname","newname","setNewname","warn","setWarn","Dialog","open","onClose","aria-labelledby","DialogTitle","style","color","DialogContent","TextField","autoFocus","margin","label","fullWidth","DialogActions","Button","trim","Messages","messages","setmessages","setPage","count","setCount","model","setModel","loading_messages","setLoading_messages","toxicityDetector","setToxicityDetector","old","Toxic","then","m","focus","messagesobj","warning","setWarning","messenger","toxicity","sender_id","delivering","oldmessages","tempid","onscroll","Math","abs","scrollTop","scrollHeight","offsetHeight","sendButton","setSendButton","useRef","sendmessage","current","messageInput","messageObject","v1","sender","date","Date","check","filter","p","results","match","undefined","aria-describedby","DialogContentText","onScroll","opacity","r","forEach","push","groupBySenderId","message_group","i","MessageBlock","reverse","onKeyDown","shiftKey","keyCode","disabled","Avatar","Message2","reveal","setReveal","Collapse","in","data-message-id","message_id","MessagingWindow","drawer","Object","keys","join","state","marginRight","AvatarGroup","max","marginLeft","src","alt","useStyles","makeStyles","theme","root","display","appBar","transition","transitions","easing","sharp","duration","leavingScreen","appBarShift","width","easeOut","enteringScreen","menuButton","spacing","hide","flexShrink","drawerPaper","drawerHeader","alignItems","padding","mixins","toolbar","justifyContent","content","flexGrow","contentShift","Menu","addconversationview","setaddconversationview","logo","Options","ConversationList","Conversation","onclick","indicator","unread","borderRight","textTransform","data-conversationid","AddConversationDialog","sugesstions","setsugesstions","setparticipants","s","u","dismiss","start","participant","Chip","icon","height","onDelete","suggestion","newlist","removeparticipant","autoComplete","exists","addparticipant","ChatPage","classes","React","setOpen","maxSnack","CssBaseline","Drawer","anchor","paper","clsx","Debugger","App","loader","cover","getItem","keypress","clear","removeEventListener","Boolean","hostname","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.14791e6c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.2b68e57d.png\";","module.exports = \"data:image/png;base64,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\"","export default function endpoint() {\n\n        const endpoint = [\n                'http://localhost:8000/',\n                'https://chat.cogniwonder.com/',\n                'https://cogniwonder.herokuapp.com/'\n        ];\n\n        switch (window.location.origin) {\n                case 'http://localhost:3000':\n                        window.API_ENDPOINT = endpoint[0];\n                        return window.API_ENDPOINT;\n\n                default:\n                        window.API_ENDPOINT = window.location.origin + '/';\n                        return window.API_ENDPOINT;\n        }\n}\n\n","import axios from 'axios';\n\nimport getendpoint from '../api-endpoint'\nimport Cookies from 'universal-cookie';\nimport { orderBy } from 'natural-orderby';\n\nimport { setupCache } from 'axios-cache-adapter'\n\n// Create `axios-cache-adapter` instance\nconst cache = setupCache({\n    maxAge: 15 * 60 * 1000\n})\n\n// Create `axios` instance passing the newly created `cache.adapter`\nconst axios_cached_api = axios.create({\n    adapter: cache.adapter\n})\n\nconst endpoint = `${getendpoint()}api`;\n\nconst cookies = new Cookies();\nconst api = {\n\n    getconversations: async (userid) => {\n\n        const point = endpoint + '/conversations';\n\n        const result = await post(point, {\n            userid\n        });\n        console.log(result.data.recent_activity)\n        if (result.data.length === 0) return false\n        /* if (result.data.recent_activity) {\n            result.data.recent_activity = new Date(result.data.recent_activity)\n        } else {\n            result.data.recent_activity = new Date(0)\n        } */\n        const sorted = orderBy(result.data, [(v) => v.recent_activity], [\"desc\", \"asc\"]);\n        return sorted;\n    },\n\n    getmessages: async (conversation_id, page) => {\n        const point = endpoint + '/messages';\n        const result = await post(point, {\n            conversation_id, page\n        });\n        // console.log(result.data)\n        return result.data;\n    },\n    authenticate: async (data, id) => {\n\n        console.log(endpoint)\n        try {\n            const result = await post(endpoint + \"/authenticate\", {\n                [Number(data) ? 'mobile' : 'email']: data,\n\n            });\n            return result.data;\n        } catch (error) {\n            console.log('authentication failed')\n            // alert('authentication failed')\n            return false\n        }\n\n\n    },\n\n    search: async (user) => {\n        const point = endpoint + '/search';\n\n        const result = await post(point, {\n            user\n        });\n\n        return result.data;\n    },\n    startconversation: async (ids, creator) => {\n        const point = endpoint + '/startconversation';\n\n        const result = await post(point, {\n            ids, creator\n        });\n\n        return result.data;\n    },\n    changeconversationname: async (conversation_id, conversation_name) => {\n        const point = endpoint + '/nameconversation';\n\n        const result = await post(point, {\n            conversation_id, conversation_name\n        });\n\n        return result.data;\n    },\n\n}\n\nasync function post(point, data) {\n    return await axios_cached_api.post(point, { ...data, cookies: { mdn: cookies.get('mdn'), cwcc: cookies.get('cwcc') } });\n}\n\nexport default api;","import React, { useEffect, createContext, useState } from 'react';\nimport api from './api';\nimport { useSnackbar } from 'notistack';\nimport IconButton from '@material-ui/core/IconButton';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nexport const GlobalContext = createContext();\n\nexport const GlobalContextProvider = ({ children }) => {\n  const [authentication, setAuthentication] = useState(false);\n  const [user, setuser] = useState({ userid: 0, name: '' });\n\n  const { enqueueSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    console.log('user: ', user);\n  }, [user]);\n\n  async function Authenticate(email_pwd, id) {\n    const user = await api.authenticate(email_pwd, id);\n    if (user) {\n      localStorage.setItem('email_pwd', email_pwd);\n      setuser({\n        mobile: user.mobile,\n        email: user.email,\n        first_name: user.first_name,\n        last_name: user.last_name,\n        id: user.id,\n      });\n      setTimeout(() => setAuthentication(true));\n    } else {\n      enqueueSnackbar('Authentication failed', {\n        variant: 'error',\n        anchorOrigin: { vertical: 'bottom', horizontal: 'center' },\n        persist: true,\n        preventDuplicate: true,\n        action: () => (\n          <IconButton onClick={() => window.location.reload()}>\n            <RefreshIcon />\n          </IconButton>\n        ),\n      });\n      setAuthentication(false);\n    }\n\n    return authentication;\n  }\n  return (\n    <GlobalContext.Provider\n      value={{\n        authentication,\n        Authenticate,\n        user,\n      }}\n    >\n      {children}\n    </GlobalContext.Provider>\n  );\n};\n","import React, { useContext, useEffect } from 'react';\n\nimport Cookies from 'universal-cookie';\n\n// contexts\nimport { GlobalContext } from './GloablContext';\n\n//styles\nimport './scss/Login.css';\n\nconst cookies = new Cookies();\n\nwindow.addEventListener('keydown', (e) => {\n  if (e.ctrlKey && e.key === 't') {\n    cookies.set('mdn', '8884016724');\n    cookies.set('cwcc', 'cw5f35a349096779.421');\n    window.location.reload();\n  } else if (e.ctrlKey && e.key === 'r') {\n    cookies.set('mdn', '1234567890');\n    cookies.set('cwcc', 'cw5f35a349096779.421');\n    window.location.reload();\n  }\n});\n\nconst Login = () => {\n  const { Authenticate } = useContext(GlobalContext);\n  let username = '';\n\n  useEffect(() => {\n    try {\n      Authenticate(cookies.get('mdn'), cookies.get('cwcc'));\n    } catch {}\n\n    // eslint-disable-next-line\n  }, []);\n\n  onchange = (e) => {\n    if (e.target.id === 'username') username = e.target.value;\n  };\n\n  onsubmit = async (e) => {\n    e.preventDefault();\n    Authenticate(username);\n  };\n  return (\n    <div className=\"login-page\">\n      <form action=\"post\" onSubmit={onsubmit}>\n        <div className=\"username\">\n          <input\n            onChange={onchange}\n            id=\"username\"\n            type=\"text\"\n            name=\"email/mobile\"\n            placeholder=\"email/mobile\"\n            required\n          />\n        </div>\n\n        <button type=\"submit\">Log in</button>\n      </form>\n    </div>\n  );\n};\n\nexport default Login;\n","import React, {\n  useRef,\n  useEffect,\n  createContext,\n  useContext,\n  useState,\n  useCallback,\n} from 'react';\n\nimport api from './api';\nimport io from 'socket.io-client';\nimport { orderBy } from 'natural-orderby';\n\n//global context\nimport { GlobalContext } from './GloablContext';\nimport { useSnackbar } from 'notistack';\n\nimport getendpoint from '../api-endpoint';\nimport IconButton from '@material-ui/core/IconButton';\nimport RefreshIcon from '@material-ui/icons/Refresh';\nimport Cookies from 'universal-cookie';\n\nconst cookies = new Cookies();\nconst endpoint = `${getendpoint()}`;\n\nconst socket_endpoint = endpoint;\n\nwindow.SOCKET_SETUP = 0;\n/* mainsocket.on('debug', (message) => {\n  console.log('debugger:',message);\n}); */\n\nexport const ChatContext = createContext();\n\nexport const ChatContextProvider = ({ children }) => {\n  //global context\n  const { user } = useContext(GlobalContext);\n\n  const [conversations, setconversations] = useState(false);\n  const [openedconversation, setOpenedconversation] = useState({});\n  const [sock, setSock] = useState({});\n  const [conversations_socket, setConversations_socket] = useState();\n  const [socketState, setSocketState] = useState(false);\n\n  const [messagesLoad, setMessagesLoad] = useState(false);\n  // const conversationListLength = useRef(conversations.length);\n\n  // const pconversationListLength = useRef(conversations.length);\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    const sock = io(socket_endpoint);\n    const conversation_socket = io(socket_endpoint + 'conversations');\n\n    const onconversation_socket_update = (data) => {\n      const sorted = orderBy(data, [(v) => v.recent_activity], ['desc', 'asc']);\n      setconversations(sorted);\n    };\n    conversation_socket.on('connect', () => {\n      console.log('conversation socket connected');\n      conversation_socket.on('update', onconversation_socket_update);\n      setConversations_socket(conversation_socket);\n    });\n    var errorSnack;\n    const onconnect = () => {\n      errorSnack && setTimeout(() => closeSnackbar(errorSnack));\n      enqueueSnackbar('connected', {\n        variant: 'success',\n        autoHideDuration: 2000,\n        preventDuplicate: true,\n      });\n      if (Array.isArray(conversations))\n        sock.emit(\n          'subscribe',\n          conversations.map((conversation) => ({\n            room: 'conversation' + conversation.conversation_id,\n          }))\n        );\n\n      sock.on(\n        'disconnect',\n        () =>\n          (errorSnack = enqueueSnackbar('disconnected', {\n            variant: 'error',\n            autoHideDuration: 5000,\n            preventDuplicate: true,\n            action: (key) => (\n              <IconButton onClick={() => window.location.reload()}>\n                <RefreshIcon />\n              </IconButton>\n            ),\n          }))\n      );\n    };\n    sock.on('connect', onconnect);\n\n    // sock.emit('message', { conversation_id: 9 });\n    setSock(sock);\n\n    return () => {\n      sock.removeListener('connect', onconnect);\n      conversation_socket.off('update', onconversation_socket_update);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [conversations.length]);\n\n  const updateConversations = useCallback(\n    async function updateConversations() {\n      if (conversations_socket) {\n        conversations_socket.emit('conversations', {\n          action: 'get',\n          cookies: { mdn: cookies.get('mdn'), cwcc: cookies.get('cwcc') },\n        });\n      }\n    },\n\n    [conversations_socket]\n  );\n\n  useEffect(() => {\n    if (sock.on) {\n      const online = (user) => {};\n      sock.on('online', online);\n\n      const message = async (message) => {\n        if (openedconversation.conversation_id !== message.conversation_id) {\n          await updateConversations();\n          markUndread(message.conversation_id);\n        }\n      };\n      const onupadte = async (update) => {\n        if (update.type === 'name') {\n          // console.log(update, openedconversation);\n          await updateConversations();\n          setOpenedconversation((o) => ({\n            ...o,\n            display_name: update.conversation_name,\n          }));\n        }\n      };\n      sock.on('convo-update', onupadte);\n\n      sock.on('message', message);\n      return () => {\n        sock.off('online', online);\n        sock.off('message', message);\n        sock.off('convo-update', onupadte);\n      };\n    }\n  }, [sock, openedconversation, updateConversations]);\n\n  async function startconversation(participants) {\n    if (participants && participants.length) {\n      const ids = [...participants, user].map((parti) => parti.id);\n      await api.startconversation(ids, user.id);\n      await updateConversations();\n    }\n  }\n\n  useEffect(() => {\n    if (user.id) {\n      const socket = io(`${socket_endpoint}notification${user.id}`);\n\n      socket.on('connect', () => {\n        // console.log('connected to notification channel')\n      });\n\n      socket.on('notification', async (notification) => {\n        if (notification.event === 'newconversation') {\n          // console.log('added to new convo');\n          await updateConversations();\n        }\n      });\n\n      return () => {\n        socket.removeAllListeners();\n        socket.disconnect();\n      };\n    }\n  }, [user, updateConversations]);\n\n  /* function getSocket(conversation_id) {\n    const result = conversation_sockets.filter((conversation_socket) => {\n      return conversation_socket.id === conversation_id;\n    });\n    console.log('sockets', result);\n    return result;\n  } */\n\n  useEffect(() => {\n    updateConversations();\n    // console.log('update convo changed');\n  }, [updateConversations]);\n\n  useEffect(() => {\n    markRead(openedconversation.conversation_id);\n    // console.log('op convo changed', openedconversation);\n  }, [openedconversation]);\n\n  function markUndread(conversation_id) {\n    const conversationElement = document.querySelector(\n      `.conversation${conversation_id}`\n    );\n    // console.log(conversationElement);\n    conversationElement.classList.add('unread-conversation');\n  }\n  function markRead(conversation_id) {\n    try {\n      const conversationElement = document.querySelector(\n        `.conversation${conversation_id}`\n      );\n      // console.log(conversationElement);\n      conversationElement.classList.remove('unread-conversation');\n    } catch (error) {}\n  }\n\n  function getmessages(conversation_id, page) {\n    return api.getmessages(conversation_id, page);\n  }\n\n  return (\n    <ChatContext.Provider\n      value={{\n        getmessages,\n        markUndread,\n        startconversation,\n        markRead,\n        user,\n        // getSocket,\n        sock,\n        openedconversation,\n        setOpenedconversation,\n        updateConversations,\n        conversations,\n        socketState,\n        setSocketState,\n        messagesLoad,\n        setMessagesLoad,\n        conversations_socket,\n      }}\n    >\n      {children}\n    </ChatContext.Provider>\n  );\n};\n","// import * as toxicity from '@tensorflow-models/toxicity';\n\n/* const threshold = 0.9;\n\n// Which toxicity labels to return.\nconst labelsToInclude = ['identity_attack', 'insult', 'threat'];\n\ntoxicity.load(threshold, labelsToInclude).then(model => {\n    // Now you can use the `model` object to label sentences. \n    model.classify(['you suck']).then(predictions => { console.log(predictions) });\n}); */\n\n\nexport default async function Toxic(threshold = .9, labelsToInclude) {\n    /* const model = await toxicity.load(threshold, labelsToInclude)\n\n    return {\n        model,\n        check: async (text) => {\n            return await model.classify([text]);\n        }\n    } */\n    return false\n}\n\n/*  {\n    model,\n    init: async function (threshold = .9, labelsToInclude = ['toxicity']) {\n        model = await toxicity.load(threshold, labelsToInclude)\n        return this\n    },\n    check: async (text) => {\n        return await model.classify(['you suck']);\n    }\n\n}\n */","import React, { useState, useEffect, useContext, useRef } from 'react';\n\nimport { v1 } from 'uuid';\n\nimport { ChatContext } from './ChatContext';\nimport { GlobalContext } from './GloablContext';\n\n// import { ReactTinyLink } from 'react-tiny-link';\nimport Toxic from './toxic';\n// import Menu from '@material-ui/core/Menu';\n// import MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport EditOutlinedIcon from '@material-ui/icons/EditOutlined';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport TextField from '@material-ui/core/TextField';\n\nimport Button from '@material-ui/core/Button';\n// import RefreshIcon from '@material-ui/icons/Refresh';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n// import { connect } from 'socket.io-client';\n// import { Icon } from '@material-ui/core';\nimport SendIcon from '@material-ui/icons/Send';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport Avatar from '@material-ui/core/Avatar';\nimport Collapse from '@material-ui/core/Collapse';\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\n\nimport { useSnackbar } from 'notistack';\nimport Cookies from 'universal-cookie';\n\n// const endpoint = `${getendpoint()}`;\n// import useTextToxicity from 'react-text-toxicity';\nimport ReportProblemOutlinedIcon from '@material-ui/icons/ReportProblemOutlined';\nconst cookies = new Cookies();\nconst MessagingWindow = ({ drawer }) => {\n  const { openedconversation, user } = useContext(ChatContext);\n  const [changegroupname, setchangegroupname] = useState(false);\n\n  let conversation_name;\n  if (Object.keys(openedconversation).length) {\n    if (\n      Array.isArray(openedconversation.conversation_name) &&\n      !openedconversation.display_name\n    ) {\n      conversation_name = [...openedconversation.conversation_name];\n      conversation_name = conversation_name\n        .filter((name) => name !== user.first_name)\n        .join(', ');\n    }\n    if (openedconversation.display_name)\n      conversation_name = openedconversation.display_name;\n    console.log(openedconversation);\n    return (\n      <div className=\"chat-screen\">\n        <div className=\"contact-header\">\n          {!drawer.state ? (\n            <IconButton\n              style={{ marginRight: 10 }}\n              onClick={() => drawer.set(!drawer.state)}\n            >\n              <ChevronRightIcon />\n            </IconButton>\n          ) : (\n            <></>\n          )}\n          {openedconversation.conversation.length > 2 ? (\n            <AvatarGroup max={4}>\n              {openedconversation.conversation_name.map((name, i) => (\n                <Avatar key={i}>{name[0]}</Avatar>\n              ))}\n            </AvatarGroup>\n          ) : (\n            <Avatar>{conversation_name[0]}</Avatar>\n          )}\n\n          <div className=\"about\">\n            <h4>{conversation_name}</h4>\n            <EditOutlinedIcon\n              className=\"edit-icon\"\n              onClick={() => setchangegroupname(true)}\n            />\n            <ChangeName\n              setchangegroupname={setchangegroupname}\n              changegroupname={changegroupname}\n            />\n            {/* <ChangeName\n                groupname={conversation_name}\n                setgroupname={setconversation_name}\n                {...{ setchangegroupname }}\n              /> */}\n            <IconButton style={{ marginLeft: 'auto' }}>\n              <MoreVertIcon />\n            </IconButton>\n          </div>\n        </div>\n\n        <Messages />\n      </div>\n    );\n  }\n  return (\n    <div className=\"start-chat\">\n      <img src=\"https://img.icons8.com/nolan/256/speech-bubble.png\" alt=\"\" />\n      <div>\n        <IconButton onClick={() => drawer.set(!drawer.state)}>\n          <MenuIcon />\n        </IconButton>\n        <h2>Chat</h2>\n      </div>\n    </div>\n  );\n};\n\nfunction ChangeName({ name, changegroupname, setchangegroupname }) {\n  const { openedconversation, conversations_socket } = useContext(ChatContext);\n\n  const [newname, setNewname] = useState('');\n\n  const [warn, setWarn] = useState(false);\n\n  const change = () => {\n    if (newname.trim()) {\n      conversations_socket.emit('conversations', {\n        action: 'changename',\n        conversation_id: openedconversation.conversation_id,\n        conversation_name: newname,\n        cookies: { mdn: cookies.get('mdn'), cwcc: cookies.get('cwcc') },\n      });\n      setNewname('');\n      setchangegroupname(false);\n      setWarn(false);\n    } else {\n      setWarn(true);\n    }\n  };\n\n  useEffect(() => {});\n\n  return (\n    <Dialog\n      open={changegroupname}\n      onClose={() => setchangegroupname(false)}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      {!warn ? (\n        <DialogTitle id=\"form-dialog-title\">Group Name</DialogTitle>\n      ) : (\n        <DialogTitle style={{ color: 'red' }} id=\"form-dialog-title\">\n          Invalid group name\n        </DialogTitle>\n      )}\n      <DialogContent>\n        {/* <DialogContentText>Display name</DialogContentText> */}\n        <TextField\n          onChange={(e) => {\n            setNewname(e.target.value);\n          }}\n          style={{ color: warn ? 'red' : '' }}\n          value={newname}\n          autoFocus\n          margin=\"dense\"\n          id=\"name\"\n          label=\"Name\"\n          type=\"username\"\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => setchangegroupname(false)} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={() => change()} color=\"primary\">\n          change\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst Messages = () => {\n  const {\n    getmessages,\n    openedconversation,\n    user,\n    sock,\n    updateConversations,\n    messagesLoad,\n    setMessagesLoad,\n  } = useContext(ChatContext);\n\n  const [messages, setmessages] = useState([]);\n  const [page, setPage] = useState(0);\n  const [count, setCount] = useState(0);\n  const [model, setModel] = useState(null);\n  const [loading_messages, setLoading_messages] = useState(false);\n  const [toxicityDetector, setToxicityDetector] = useState(false);\n  const { enqueueSnackbar } = useSnackbar();\n\n  useEffect(() => {\n    window.addEventListener('keydown', (e) => {\n      if (e.ctrlKey && e.key === 'a') {\n        setToxicityDetector((old) => {\n          enqueueSnackbar(!old + '', {\n            variant: !old ? 'success' : 'error',\n            autoHideDuration: 2000,\n            preventDuplicate: true,\n          });\n          return !old;\n        });\n      }\n    });\n\n    setTimeout(() => {\n      Toxic().then((m) => {\n        // console.log(m);\n        setModel(m);\n      });\n\n      // .init().then((m) => );\n    }, 0);\n  }, [enqueueSnackbar]);\n\n  function scrollToBottom() {\n    const main_message_container = document.querySelector(\n      '.messages-container'\n    );\n    main_message_container.scrollTop = main_message_container.scrollHeight;\n  }\n  useEffect(() => {\n    const messageInput = document.querySelector('.message-input textarea');\n    messageInput.focus();\n  });\n\n  useEffect(() => {\n    setPage(0);\n  }, []);\n  useEffect(() => {\n    (async () => {\n      const messagesobj = await getmessages(openedconversation.conversation_id);\n\n      setmessages(messagesobj.messages);\n      setPage(messagesobj.page);\n      setCount(messagesobj.count);\n\n      return () => {\n        setmessages([]);\n      };\n    })();\n  }, [openedconversation, getmessages]);\n  const [warning, setWarning] = useState(false);\n  useEffect(() => {\n    const messenger = async (message) => {\n      // console.log('got message', message);\n      if (message.toxicity) {\n        setWarning(true);\n      }\n      if (\n        message.conversation_id === openedconversation.conversation_id &&\n        message.sender_id !== user.id\n      ) {\n        /* const newMessages = (\n          await getmessages(openedconversation.conversation_id)\n        ).messages; */\n        message.delivering = false;\n        setmessages((oldmessages) => [...oldmessages, message]);\n\n        updateConversations();\n      } else if (message.sender_id === user.id) {\n        setmessages((oldmessages) => {\n          const newmessages = oldmessages.map((m) => {\n            if (m.tempid === message.tempid) {\n              message.delivering = false;\n              return message;\n            }\n            return m;\n          });\n          return newmessages;\n        });\n      }\n    };\n    sock.on('message', messenger);\n\n    return () => {\n      sock.off('message', messenger);\n    };\n  }, [messages, openedconversation, sock, updateConversations, user]);\n\n  useEffect(() => {\n    /* const message_container = document.querySelector('.messages-view');\n    \n    // message_container.style.display = '';\n    message_container.style.opacity = '1';\n    // chat_container.scrollTop = 0; */\n    setMessagesLoad(false);\n\n    return () => {\n      // message_container.style.display = 'none';\n      // message_container.style.opacity = '0';\n    };\n  }, [messages, setMessagesLoad]);\n\n  /* const [typedText, setTypedText] = useState('');\n\n  const predictions = useTextToxicity(typedText, { delay: 500 }); */\n\n  /* useEffect(() => {\n    if (predictions) {\n      console.log(predictions[6].match);\n      // predictions.reduce;\n    }\n  }, [predictions]); */\n\n  const onscroll = async (e) => {\n    const s =\n      Math.abs(e.target.scrollTop) >=\n      Math.abs(e.target.scrollHeight - e.target.offsetHeight);\n\n    if (s && !loading_messages && messages.length < count) {\n      setLoading_messages(true);\n\n      const messagesobj = await getmessages(\n        openedconversation.conversation_id,\n        page\n      );\n      console.log('setting new messages');\n      setmessages(messagesobj.messages);\n      setPage(messagesobj.page);\n      setLoading_messages(false);\n    }\n  };\n\n  const [sendButton, setSendButton] = useState(false);\n\n  const message = useRef();\n\n  const onchange = (e) => {\n    message.current = e.target.value;\n\n    if (message.current.trim()) {\n      setSendButton(true);\n    } else {\n      setSendButton(false);\n    }\n  };\n\n  const sendmessage = async () => {\n    if (true) {\n      message.current = message.current.trim();\n      const messageInput = document.querySelector('.message-input textarea');\n\n      const messageObject = {\n        tempid: v1(),\n        message: message.current,\n        sender: `${user.first_name} ${user.last_name}`,\n        sender_id: user.id,\n        conversation_id: openedconversation.conversation_id,\n        date: new Date(),\n        delivering: true,\n      };\n      setTimeout(() => {\n        updateConversations();\n        setSendButton(false);\n        messageInput.value = '';\n        message.current = '';\n      }, 0);\n\n      setmessages([...messages, messageObject]);\n      setCount(count + 1);\n\n      messageInput.focus();\n\n      const toxicity = toxicityDetector\n        ? (await model.check(message.current)).filter((p) => p.results[0].match)\n        : undefined;\n      messageObject.toxicity =\n        toxicityDetector && toxicity.length ? toxicity : undefined;\n      sock.emit('message', messageObject);\n    }\n  };\n\n  return (\n    <>\n      <Dialog\n        open={warning}\n        onClose={() => setWarning(false)}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Warning</DialogTitle>\n        <DialogContent>\n          <ReportProblemOutlinedIcon />\n          <DialogContentText id=\"alert-dialog-description\">\n            Toxicity will not be tolerated, all toxic messages will dissapear\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setWarning(false)} color=\"primary\" autoFocus>\n            i understand\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <div className=\"messages-container\">\n        <div\n          onScroll={onscroll}\n          style={{\n            // display: messagesLoad ? 'none' : '',\n            opacity: messagesLoad ? '0' : '1',\n          }}\n          className=\"messages-view\"\n        >\n          {loading_messages ? (\n            <div className=\"loader\">\n              <div></div>\n              <div></div>\n              <div></div>\n            </div>\n          ) : (\n            <></>\n          )}\n          {messages ? (\n            groupBySenderId(messages)\n              .map((message_group, i) => {\n                return <MessageBlock key={i} messages={message_group} />;\n              })\n              .reverse()\n          ) : (\n            <></>\n          )}\n        </div>\n\n        <div\n          style={{\n            // display: !messagesLoad ? 'none' : '',\n            opacity: messagesLoad ? '1' : '0',\n          }}\n          className=\"loader message-loader\"\n        >\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n      <div className=\"message-input\">\n        <textarea\n          onChange={onchange}\n          onKeyDown={(e) => {\n            if (!e.shiftKey && e.keyCode === 13 && sendButton) {\n              e.target.value = '';\n              sendmessage();\n            }\n          }}\n          type=\"text\"\n          placeholder=\"type something...\"\n        />\n        <IconButton\n          disabled={!!(!sendButton && model)}\n          onClick={sendmessage}\n          className=\"send-btn\"\n        >\n          <SendIcon />\n        </IconButton>\n      </div>\n    </>\n  );\n};\n\nfunction groupBySenderId(messages) {\n  let r = [];\n  messages.forEach((message) => {\n    r.length > 0 &&\n    r[r.length - 1][r[r.length - 1].length - 1].sender_id === message.sender_id\n      ? r[r.length - 1].push(message)\n      : r.push([message]);\n  });\n  return r;\n}\n\n/* const Message = ({\n  type = 'message',\n  text,\n  sender_name,\n  sender_id,\n  date,\n  group,\n  delivering,\n  message_id,\n}) => {\n  const { user } = useContext(ChatContext);\n\n  if (type === 'message') {\n    let message_classname = group ? 'message group-message' : 'message';\n\n    return (\n      <div\n        style={{\n          background: delivering ? 'rgb(255, 133, 133)' : '',\n          opacity: delivering ? '.5' : '',\n        }}\n        data-message-id={message_id}\n        className={message_classname}\n        id={user.id === sender_id ? 'sent-message' : 'message'}\n      >\n        <h1 id={group ? 'group-sender' : ''}>{sender_name}</h1>\n        <span>{text}</span>\n        <span id=\"date-time\">{formatAMPM(new Date(date))}</span>\n      </div>\n    );\n  } else if (type === 'badge') {\n    return (\n      <div className=\"badge\">\n        <span>{text}</span>\n      </div>\n    );\n  }\n}; */\n\nfunction MessageBlock({ messages }) {\n  const { user } = useContext(GlobalContext);\n  const id = user.id === messages[0].sender_id ? 'sender' : '';\n\n  return (\n    <div className=\"message-block\" id={id}>\n      <Avatar>{messages[0].sender[0]}</Avatar>\n      <div className=\"messages\">\n        {messages.map((message, i) => (\n          <Message2 key={i} message={message} />\n        ))}\n        <span>{messages[0].sender}</span>\n      </div>\n    </div>\n  );\n}\n\nfunction Message2({ message }) {\n  const [reveal, setReveal] = useState(false);\n  useEffect(() => {\n    setReveal(true);\n  }, []);\n  return (\n    <Collapse in={reveal}>\n      <div\n        className=\"message\"\n        data-message-id={message.message_id}\n        id={message.delivering ? 'delivering-message' : ''}\n      >\n        <span>{message.message}</span>\n        {/* <AccessTimeIcon\n        id=\"message-loader\"\n        style={{ transform: message.delivering ? 'scale(1)' : 'scale(0)' }}\n      /> */}\n        {message.delivering ? <AccessTimeIcon id=\"message-loader\" /> : <></>}\n        {message.toxicity ? <ReportProblemOutlinedIcon /> : <></>}\n      </div>\n    </Collapse>\n  );\n}\n\nfunction formatAMPM(date) {\n  var hours = date.getHours();\n  var minutes = date.getMinutes();\n  var ampm = hours >= 12 ? 'pm' : 'am';\n  hours = hours % 12;\n  hours = hours ? hours : 12; // the hour '0' should be '12'\n  minutes = minutes < 10 ? '0' + minutes : minutes;\n  var strTime = hours + ':' + minutes + ampm;\n  return strTime;\n}\nexport default MessagingWindow;\n","import React, { useState, useEffect, useContext } from 'react';\n\nimport MessagingWindow from './MessagingWindow';\n//context\nimport { ChatContext, ChatContextProvider } from './ChatContext';\n\n// Assets\nimport logo from './assets/img/logo.png';\n// style\nimport './scss/chat-page.css';\nimport { GlobalContext } from './GloablContext';\n\nimport api from './api';\n\nimport clsx from 'clsx';\nimport makeStyles from '@material-ui/core/styles/makeStyles';\nimport Drawer from '@material-ui/core/Drawer';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n/* import AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport List from '@material-ui/core/List';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport MailIcon from '@material-ui/icons/Mail'; */\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport Avatar from '@material-ui/core/Avatar';\nimport Chip from '@material-ui/core/Chip';\nimport AvatarGroup from '@material-ui/lab/AvatarGroup';\n\n// import Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport FlipMove from 'react-flip-move';\nconst drawerWidth = 252;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    marginLeft: drawerWidth,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-end',\n  },\n  content: {\n    flexGrow: 1,\n    /* padding: theme.spacing(3), */\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    marginLeft: -drawerWidth,\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginLeft: 0,\n  },\n}));\n\nconst ChatPage = () => {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n  const { user } = useContext(GlobalContext);\n  useEffect(() => {\n    setTimeout(() => {\n      try {\n        if (user.mobile) setOpen(true);\n      } catch (error) {\n        console.log('failed to open drawer');\n      }\n    }, 3000);\n  }, [user]);\n\n  return (\n    <ChatContextProvider maxSnack={3}>\n      <div className=\"chat-page\">\n        <div className={classes.root}>\n          <CssBaseline />\n\n          <Drawer\n            className={classes.drawer}\n            variant=\"persistent\"\n            anchor=\"left\"\n            open={open}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n          >\n            <Menu drawer={{ set: setOpen, state: open }} />\n          </Drawer>\n          <main\n            className={clsx(classes.content, {\n              [classes.contentShift]: open,\n            })}\n          >\n            <MessagingWindow drawer={{ set: setOpen, state: open }} />\n          </main>\n        </div>\n      </div>\n    </ChatContextProvider>\n  );\n};\n\nconst Menu = ({ drawer }) => {\n  const [addconversationview, setaddconversationview] = useState(false);\n  const { user } = useContext(GlobalContext);\n\n  useEffect(() => {\n    // document.querySelector('.menu header').scrollIntoView();\n  }, []);\n  return (\n    <>\n      <div className=\"menu\">\n        <header>\n          <img src={logo} alt=\"logo\" />\n          <h2>{user.first_name}</h2>\n          <IconButton\n            style={{ marginLeft: 'auto' }}\n            onClick={() => drawer.set(!drawer.state)}\n          >\n            <ChevronLeftIcon />\n          </IconButton>\n        </header>\n\n        <ConversationList />\n        <Options setaddconversationview={setaddconversationview} />\n      </div>\n      {addconversationview && (\n        <AddConversationDialog\n          setaddconversationview={setaddconversationview}\n        />\n      )}\n    </>\n  );\n};\nconst Options = ({ setaddconversationview }) => {\n  return (\n    <>\n      <div className=\"menu-options\">\n        <div className=\"option\" onClick={() => setaddconversationview(true)}>\n          <img\n            src=\"https://img.icons8.com/cotton/64/000000/add-to-chat.png\"\n            alt=\"\"\n          />\n          <span>start chat</span>\n        </div>\n      </div>\n    </>\n  );\n};\n\nconst ConversationList = () => {\n  const { conversations } = useContext(ChatContext);\n  // const conversations = false;\n\n  if (Array.isArray(conversations) && !conversations.length) {\n    return (\n      <div className=\"empty-conversation-list\">you have no conversations</div>\n    );\n  }\n  return (\n    <>\n      {conversations.length ? (\n        <FlipMove className=\"conversation-list\" duration={4000}>\n          <>\n            {conversations.map((conversation, i) => (\n              <Conversation key={i} conversation={conversation} />\n            ))}\n          </>\n        </FlipMove>\n      ) : (\n        <div className=\"empty-conversation-list\">\n          <div className=\"loader\">\n            <div></div>\n            <div></div>\n            <div></div>\n          </div>\n        </div>\n      )}\n    </>\n  );\n};\n\nconst Conversation = ({ conversation }) => {\n  const { user } = useContext(GlobalContext);\n  const {\n    openedconversation,\n    setOpenedconversation,\n    markRead,\n\n    setMessagesLoad,\n  } = useContext(ChatContext);\n\n  const onclick = () => {\n    // markRead(conversation.conversation_id);\n    setTimeout(() => {\n      document.querySelector('.messages-view').style.opacity = '0';\n      setMessagesLoad(true);\n      const messageInput = document.querySelector('.message-input textarea');\n      messageInput.focus();\n    }, 100);\n    // const conversation_opened = { ...conversation, group };\n\n    setOpenedconversation(conversation);\n  };\n\n  const indicator =\n    conversation.unread &&\n    !(conversation.conversation_id === openedconversation.conversation_id)\n      ? '7px solid rgb(143, 255, 143)'\n      : '';\n  let conversation_name = conversation.conversation_name;\n\n  if (Array.isArray(conversation_name)) {\n    conversation_name = conversation_name\n      .filter((name) => name !== user.first_name)\n      .join(', ');\n  }\n  if (conversation.display_name) conversation_name = conversation.display_name;\n  if (conversation.conversation.length === 2) {\n    return (\n      <Button\n        style={{ borderRight: indicator, textTransform: 'none' }}\n        onClick={onclick}\n        className={`conversation conversation${conversation.conversation_id}`}\n        data-conversationid={conversation.conversation_id}\n        id={\n          conversation.conversation_id === openedconversation.conversation_id\n            ? 'opened-conversation'\n            : ''\n        }\n      >\n        <Avatar>{conversation_name[0]}</Avatar>\n        <div className=\"about\">\n          <h4>{conversation_name}</h4>\n        </div>\n      </Button>\n    );\n  } else {\n    return (\n      <Button\n        style={{ textTransform: 'none' }}\n        onClick={() => {\n          markRead(conversation.conversation_id);\n          onclick(null, true);\n          // setOpenedconversation({ ...conversation, group: true });\n        }}\n        className={`conversation group-conversation conversation${conversation.conversation_id}`}\n        id={\n          conversation.conversation_id === openedconversation.conversation_id\n            ? 'opened-conversation'\n            : ''\n        }\n      >\n        <AvatarGroup max={3} spacing=\"small\">\n          {conversation.conversation_name.map((name, i) => {\n            return <Avatar key={i}>{name[0]}</Avatar>;\n          })}\n        </AvatarGroup>\n        {/* <Avatar\n          src=\"https://img.icons8.com/color/48/000000/conference-skin-type-7.png\"\n          alt=\"group\"\n        /> */}\n        <div className=\"about\">\n          <h4>{conversation_name}</h4>\n        </div>\n      </Button>\n    );\n  }\n};\n\nfunction AddConversationDialog2() {\n  const [open, setOpen] = useState(false);\n  const handleClose = () => setOpen(false);\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle id=\"form-dialog-title\">Subscribe</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          To subscribe to this website, please enter your email address here. We\n          will send updates occasionally.\n        </DialogContentText>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          id=\"name\"\n          label=\"Email Address\"\n          type=\"email\"\n          fullWidth\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={handleClose} color=\"primary\">\n          Cancel\n        </Button>\n        <Button onClick={handleClose} color=\"primary\">\n          Subscribe\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n\nconst AddConversationDialog = ({ setaddconversationview }) => {\n  const [sugesstions, setsugesstions] = useState([]);\n  const [participants, setparticipants] = useState([]);\n  const { user, startconversation } = useContext(ChatContext);\n\n  const addparticipant = (suggestion) => {\n    let exists = false;\n    participants &&\n      participants.forEach((participant) => {\n        if (participant) {\n          if (participant.mobile === suggestion.mobile) exists = true;\n        }\n      });\n\n    if (!exists) {\n      setparticipants([...(participants || []), suggestion]);\n    }\n  };\n\n  useEffect(() => {\n    /* const input = document.querySelector('#conversation-adder');\n    const conversationadd = document; //|| document.querySelector('.conversation-add');\n    input.focus();\n    const enteradd = (e) => {\n      if (e.key === 'Enter' && sugesstions) {\n        addparticipant(sugesstions[0]);\n        e.preventDefault();\n      }\n    };\n    const dismiss = (e) => {\n      if (e.keyCode === 27) setaddconversationview(false);\n    };\n\n    input.addEventListener('keydown', enteradd);\n    conversationadd.addEventListener('keydown', dismiss);\n\n    return () => {\n      conversationadd.removeEventListener('keydown', dismiss);\n      input.removeEventListener('keydown', enteradd);\n    }; */\n  });\n\n  const onchange = async (e) => {\n    e.persist();\n\n    if (e.target.value !== '') {\n      const s = await api.search(e.target.value);\n\n      setsugesstions(s.filter((u) => u.mobile !== user.mobile));\n    } else {\n      setsugesstions([]);\n    }\n  };\n\n  const removeparticipant = (suggestion) => {\n    let newlist =\n      participants &&\n      participants.filter((participant) => {\n        if (participant.mobile === suggestion.mobile) return false;\n        return true;\n      });\n\n    setparticipants(newlist);\n  };\n\n  const dismiss = (e) => {\n    setaddconversationview(false);\n  };\n  const start = async () => {\n    dismiss();\n    startconversation(participants);\n  };\n\n  return (\n    <Dialog className=\"conversation-add\" open={true} onClose={dismiss}>\n      <DialogContent>\n        <div className=\"users-input\">\n          <h2>Create</h2>\n          {participants && participants.length !== 0 && (\n            <div className=\"participants\">\n              {participants.map((participant, i) => (\n                <Chip\n                  style={{ margin: '4px' }}\n                  key={i}\n                  icon={\n                    <Avatar style={{ width: '22px', height: '22px' }}>\n                      {participant.first_name[0]}\n                    </Avatar>\n                  }\n                  label={participant.first_name}\n                  onDelete={() => {\n                    removeparticipant(participant);\n                  }}\n                  variant=\"outlined\"\n                />\n              ))}\n            </div>\n          )}\n          <TextField\n            onChange={onchange}\n            onSubmit={(e) => e.preventDefault()}\n            id=\"conversation-adder\"\n            type=\"text\"\n            name=\"email/mobile\"\n            placeholder=\"email/mobile\"\n            required\n            autoComplete=\"off\"\n            autoFocus\n            margin=\"dense\"\n            // id=\"name\"\n            // label=\"Email Address\"\n            // type=\"email\"\n            fullWidth\n          />\n\n          {sugesstions && sugesstions.length !== 0 && (\n            <div className=\"suggestions\">\n              {sugesstions.map((suggestion, i) => (\n                <div\n                  key={i}\n                  onClick={() => addparticipant(suggestion)}\n                  className=\"suggestion\"\n                >\n                  <h4>{suggestion.first_name}</h4>\n                  <p>{suggestion.mobile}</p>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={dismiss}>cancel</Button>\n        <Button disabled={!participants.length} onClick={start}>\n          Start\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n\nexport default ChatPage;\n","import io from 'socket.io-client';\n\nimport getendpoint from '../api-endpoint';\n\nexport default function Debugger() {\n  console.log('enabling server debug mode');\n  const endpoint = `${getendpoint()}`;\n  const socket = io(endpoint + 'debug');\n  const update = (message) => {\n    if (message.length === 1) {\n      message = message[0];\n      console.log(message);\n    } else {\n      console.log(...message);\n    }\n  };\n  window.localStorage.setItem('debug', 'true');\n  socket.on('debug', update);\n}\n","import React, { useContext, useEffect } from 'react';\n// components\nimport Login from './Login';\n\nimport ChatPage from './ChatPage';\n//Global context\nimport { GlobalContext } from './GloablContext';\n// assets\nimport logo from './assets/img/logoWhite.png';\n\nimport Debugger from './Debugger';\nconst App = () => {\n  const { authentication } = useContext(GlobalContext);\n\n  useEffect(() => {\n    if (authentication) {\n      setTimeout(() => {\n        const loader = document.querySelector('#intro-loader');\n        loader.style.opacity = 0;\n        loader.style.height = 0;\n        loader.style.margin = 0;\n\n        setTimeout(() => {\n          const cover = document.querySelector('.intro-sequence');\n          cover.style.opacity = 0;\n\n          setTimeout(() => {\n            cover.style.display = 'none';\n          }, 600);\n        }, 600);\n      }, 2000);\n    }\n  }, [authentication]);\n\n  useEffect(() => {\n    if (window.localStorage.getItem('debug')) {\n      Debugger();\n    }\n    const keypress = (e) => {\n      if (e.key === 'd' && e.ctrlKey) {\n        if (!window.localStorage.getItem('debug')) {\n          Debugger();\n        } else {\n          window.localStorage.clear();\n        }\n      }\n    };\n\n    window.addEventListener('keypress', keypress);\n\n    return () => window.removeEventListener('keypress', keypress);\n  }, []);\n\n  /* return (\n    <div className=\"messages-container\">\n      <div className=\"message-view\">\n        <MessageBlock id=\"sender\" />\n        <MessageBlock />\n      </div>\n    </div>\n  ); */\n  return (\n    <>\n      {authentication ? <ChatPage /> : <Login />}\n      <div className=\"intro-sequence\">\n        <img src={logo} alt=\"\" />\n        <div className=\"loader book\" id=\"intro-loader\">\n          <figure className=\"page\"></figure>\n          <figure className=\"page\"></figure>\n          <figure className=\"page\"></figure>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\n// Global styling\nimport './index.css';\nimport { SnackbarProvider } from 'notistack';\n\n// main app\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\n//global context\nimport { GlobalContextProvider } from './components/GloablContext';\n\n\n\nReactDOM.render(\n  <SnackbarProvider>\n    <GlobalContextProvider>\n      <App />\n    </GlobalContextProvider>\n  </SnackbarProvider>\n  ,\n  document.getElementById('root')\n);\n\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n\n"],"sourceRoot":""}